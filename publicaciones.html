<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Publicaciones | SIGAC</title>
  <link rel="icon" href="logo_sigac.png" type="image/png">

  <!-- Estilos globales -->
  <link rel="stylesheet" href="style.css">

  <!-- AOS Animaciones -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <!-- Iconos (opcional, por si luego quieres usar) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Estilos espec√≠ficos para publicaciones (sin tocar style.css) -->
  <style>
    /* Im√°genes de las cards estilo Repositorio/Tutoriales */
    .section .card img,
    .section.alt .card img {
      width: 100%;
      height: 220px;
      object-fit: cover;
      border-radius: 10px;
      display: block;
      transition: transform 0.3s ease;
    }

    .section .card img:hover,
    .section.alt .card img:hover {
      transform: scale(1.03);
    }

    /* Hacer que todas las cards tengan el bot√≥n pegado abajo */
    .section .card {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .section .card .btn-secondary {
      margin-top: auto;        
      align-self: center;     /* ‚Üê CENTRAR EL BOT√ìN */
      display: inline-block;
    }

    /* Ajustes de texto en las cards de publicaciones */
    .pub-fecha {
      font-size: 0.9rem;
      color: #666;
      margin: 0.25rem 0 0.4rem;
    }

    .pub-autor {
      font-size: 0.9rem;
      color: #333;
      margin: 0.4rem 0 0;
    }

    .card h3 {
      margin-top: 0.75rem;
      margin-bottom: 0.35rem;
      color: #b30000;
      font-size: 1.05rem;
    }

    .card p {
      font-size: 0.95rem;
    }
  </style>
  <!-- üîß FIX SOLO PARA CELULAR -->
<style>
  @media (max-width: 768px) {

    .navbar {
      position: relative !important;
    }

    #nav-menu {
      position: absolute !important;
      top: 100%;
      left: 0;
      right: 0;
      display: none;
      flex-direction: column;
    }

    #nav-menu.active {
      display: flex !important;
    }

    .menu-toggle {
      position: relative !important;
      z-index: 9999 !important;
    }
  }
</style>
</head>
<body>

  <!-- üîπ NAVBAR -->
  <header class="navbar">
    <div class="logo">
      <img src="logo_sigac.png" alt="Logo SIGAC">
      <div class="logo-text">
        <span class="nombre">SIGAC</span><br>
        <span class="semillero">Semillero de Investigaci√≥n en Geof√≠sica Aplicada y Computacional</span>
      </div>
    </div>

    <nav id="nav-menu">
      <a href="index.html">Inicio</a>
      <a href="nosotros.html">Nosotros</a>
      <a href="Repositorio.html">Repositorio</a>
      <a href="tutoriales.html">Tutoriales</a>
      <a href="publicaciones.html" class="active">Publicaciones</a>
      <a href="investigacion.html">Investigaci√≥n</a>
      <a href="contacto.html">Contacto</a>
    </nav>

    <!-- Bot√≥n hamburguesa -->
    <div class="menu-toggle" id="menu-toggle">
      <i class="fa fa-bars"></i>
    </div>
  </header>

  <!-- üîπ HERO PUBLICACIONES -->
  <section class="hero"
    style="height: 40vh;
           background: linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url('https://i.postimg.cc/nVk0Bktq/Diseno-sin-titulo-2.png');
           background-size: cover;
           background-position: center center;
           background-attachment: fixed;
           color: #fff;
           display: flex;
           justify-content: flex-start;
           align-items: flex-start;
           padding: 8% 0 0 8%;
           text-align: left;">
    <div data-aos="fade-right" style="max-width: 700px;">
      <h1 style="font-size: 3.2rem; color: #ffffff; margin-bottom: 1rem;">Publicaciones SIGAC</h1>
      <p style="font-size: 1.3rem; color: #f0f0f0; margin-bottom: 2rem;">
        Art√≠culos cient√≠ficos, p√≥sters y otros productos acad√©micos asociados al
        Semillero de Investigaci√≥n en Geof√≠sica Aplicada y Computacional.
      </p>
      <a href="#publicaciones" class="btn-primary">Ver producci√≥n acad√©mica</a>
    </div>
  </section>

  <!-- üîπ CONTENIDO PRINCIPAL -->
  <main>

    <section class="section" id="publicaciones" data-aos="fade-up">
      <h2>Producci√≥n acad√©mica SIGAC</h2>
      <p>
        A continuaci√≥n se presentan las publicaciones asociadas al
        <strong>Semillero de Investigaci√≥n en Geof√≠sica Aplicada y Computacional (SIGAC)</strong>,
        incluyendo art√≠culos cient√≠ficos y p√≥sters.
      </p>

      <h3 style="margin-top: 2.5rem; margin-bottom: 1rem; color:#b30000;">Art√≠culos cient√≠ficos</h3>
      <div id="papers-container" class="cards"></div>

      <h3 style="margin-top: 3rem; margin-bottom: 1rem; color:#b30000;">P√≥sters y presentaciones</h3>
      <div id="posters-container" class="cards"></div>

    </section>

  </main>

  <!-- üîπ FOOTER -->
  <footer>
    <p>¬© 2025 Semillero SIGAC | Geof√≠sica Aplicada y Computacional</p>
  </footer>

  <!-- üîπ SCRIPT PARA CARGAR PUBLICACIONES DESDE JSON -->
  <script>
    function parseSpanishDate(dateStr) {
      if (!dateStr) return 0;

      const meses = {
        "enero": 0, "febrero": 1, "marzo": 2, "abril": 3,
        "mayo": 4, "junio": 5, "julio": 6, "agosto": 7,
        "septiembre": 8, "setiembre": 8, "octubre": 9,
        "noviembre": 10, "diciembre": 11
      };

      const clean = dateStr.toLowerCase().replace(",", "").trim();
      const parts = clean.split(/\s+/);

      const dia = parseInt(parts[0], 10) || 1;
      const mesNombre = parts[2] || "";
      const mes = meses[mesNombre] ?? 0;
      const anio = parts[3] ? parseInt(parts[3], 10) : 2024;

      return new Date(anio, mes, dia).getTime();
    }

    async function loadPublications() {
      try {
        const response = await fetch('json/publications.json');
        const publications = await response.json();

        const papersContainer = document.getElementById('papers-container');
        const postersContainer = document.getElementById('posters-container');

        // T√≠tulos de art√≠culos cient√≠ficos
        const paperTitles = [
          "Porphyry-type mineral prospectivity mapping with imbalanced data via prior geological transfer learning",
          "Reservoir porosity estimation from poststack seismic data using a deep learning model constrained by well porosity: A near-field application"
        ];

        const papers = [];
        const posters = [];

        publications.forEach(pub => {
          if (paperTitles.includes(pub.title)) {
            papers.push(pub);
          } else {
            posters.push(pub);
          }
        });

        papers.sort((a, b) => parseSpanishDate(b.date) - parseSpanishDate(a.date));
        posters.sort((a, b) => parseSpanishDate(b.date) - parseSpanishDate(a.date));

        function createCard(pub) {
          const card = document.createElement('div');
          card.className = 'card';
          card.setAttribute('data-aos', 'zoom-in');

          const safeTitle = pub.title || '';
          const safeDesc = pub.description || '';
          const safeAuthor = pub.author || '';
          const safeDate = pub.date || '';

          card.innerHTML = `
            <a href="${pub.link}" target="_blank" rel="noopener noreferrer">
              <img src="${pub.image}" alt="${pub.alt || safeTitle}">
            </a>
            <h3>${safeTitle}</h3>
            ${safeDate ? `<p class="pub-fecha">${safeDate}</p>` : ''}
            ${safeDesc ? `<p>${safeDesc}</p>` : ''}
            ${safeAuthor ? `<p class="pub-autor"><strong>${safeAuthor}</strong></p>` : ''}
            <a href="${pub.link}" target="_blank" rel="noopener noreferrer"
               class="btn-secondary">
              Ver publicaci√≥n
            </a>
          `;

          return card;
        }

        papers.forEach(pub => papersContainer.appendChild(createCard(pub)));
        posters.forEach(pub => postersContainer.appendChild(createCard(pub)));

      } catch (error) {
        console.error("Error cargando las publicaciones:", error);
      }
    }

    AOS.init({ duration: 1000, once: true });
    window.onload = loadPublications;
  </script>

  <!-- üîπ JS Men√∫ hamburguesa -->
  <script>
    const toggle = document.getElementById('menu-toggle');
    const navMenu = document.getElementById('nav-menu');
    toggle?.addEventListener('click', () => {
      navMenu.classList.toggle('active');
      toggle.classList.toggle('active');
    });
  </script>

</body>
</html>
